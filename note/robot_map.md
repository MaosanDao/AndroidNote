# 扫地机地图相关的知识点

## 坐标系
>扫地机的坐标系的构建，以第一次开始时，机器的位置为坐标原点（0，0，0）。以后每次的坐标系都是依靠这个而来的，不会再发生变化。
## 地图
* 拟合直线
>一般的地图的原始数据，“墙”的显示基本是一些比较粗的线，或者是一些一系列的点。那么我们要保持地图的美观性，就需要通过一些图像的算法，将这些一系列的点拟合为一条笔直的线。其中，尽量为粗线，因为这样可以在视觉上减小实际数据的误差。
* 车体展示
>车体在地图上的展示，一般使用呼吸灯的效果。目的是为了在视觉上减小其显示误差，因为车体的位置可能不会即时的保持其正确值，可能此时获取的位置是上一次上报的位置。那么呼吸灯的效果就可以避免这样的误差，其中，车体会是一种一大一小的动画呈现的。
* 已知和未知区域的显示
>原始地图在雷达还未扫到的区域会显示一些放射性的线段，在客户端上看起来很难看，所以这些也是需要进行处理的。即，通过图像算法将线段去除。目前，比较好的方案是，模拟游戏中的一些方法，将未知区域设置为黑色区域，当车体到达的时候，再慢慢呈现房间的轮廓。这样的效果在客户端上看起来就好多了。
* 走过的区域的显示
>一般有两种方案，走过的区域变色；轨迹线的显示。其中，区域显示有较大的困难，而轨迹线是比较普遍的方案。但是，轨迹线的呈现，可以是不同种类的颜色或者透明度。比如，清扫类型、活动类型等。
* 客户端地图缩放程度
>需要将地图的呈现限制它的缩放程度，不然，会让用户看见模糊的边界等。
* 全局和增量地图
>这个意思呢，是指在传输地图的时候，一般传输的数据为增量地图。而客户端在显示的时候呢，也会隔一段时间去获取一次全图，这样又保证了准确性又减小了流量消耗。
* 绘制工具
>openGL or Unid2d
## 区域划分
* 车体过门就是换区域
* 客户端手势划区域的时候需要边线停靠边线
## 地图传输尽可能设备直连客户端
